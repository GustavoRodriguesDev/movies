import 'package:flutter_test/flutter_test.dart';
import 'package:mocktail/mocktail.dart';
import 'package:movies/app/core/service/http_service/http_service.dart';
import 'package:movies/app/core/service/http_service/response_http_service.dart';
import 'package:movies/app/modules/cast/domain/entity/cast_entity.dart';
import 'package:movies/app/modules/cast/external/datasource/cast_datasource.dart';
import 'package:movies/app/modules/cast/infra/datasource/cast_datasource.dart';

class HttpServiceMock extends Mock implements IHttpService {}

void main() {
  late IHttpService http;
  late ICastDatasource datasource;

  setUpAll(() {
    http = HttpServiceMock();
    datasource = CastDatasource(http);
  });

  test('Deve retornar um ListCastEntity quando o metodo for chamado getAllActores for chamado', () async {
    when(() => http.get(any())).thenAnswer((_) async => ResponseHttpService(responseMock));
    final response = await datasource.getAllActores(1);
    expect(response, isA<List<CastEntity>>());
  });
}

final responseMock = {
  "id": 625,
  "cast": [
    {
      "adult": false,
      "gender": 2,
      "id": 8975,
      "known_for_department": "Acting",
      "name": "Sam Waterston",
      "original_name": "Sam Waterston",
      "popularity": 6.875,
      "profile_path": "/vNe4lHhXqOd5fF8oQ125KNQCfK3.jpg",
      "cast_id": 16,
      "character": "Sydney Schanberg",
      "credit_id": "52fe4260c3a36847f80197e5",
      "order": 0
    },
    {
      "adult": false,
      "gender": 2,
      "id": 8976,
      "known_for_department": "Acting",
      "name": "Haing S. Ngor",
      "original_name": "Haing S. Ngor",
      "popularity": 2.064,
      "profile_path": "/60QdTuxnCtOKjrU6yz4od7JeKvh.jpg",
      "cast_id": 17,
      "character": "Dith Pran",
      "credit_id": "52fe4260c3a36847f80197e9",
      "order": 1
    },
    {
      "adult": false,
      "gender": 2,
      "id": 8977,
      "known_for_department": "Acting",
      "name": "Craig T. Nelson",
      "original_name": "Craig T. Nelson",
      "popularity": 11.877,
      "profile_path": "/rMh8qdexFKmc7mq7oLzsLLvCCjs.jpg",
      "cast_id": 20,
      "character": "Major Reeves, Military Attache",
      "credit_id": "52fe4260c3a36847f80197f5",
      "order": 2
    },
    {
      "adult": false,
      "gender": 2,
      "id": 6949,
      "known_for_department": "Acting",
      "name": "John Malkovich",
      "original_name": "John Malkovich",
      "popularity": 21.282,
      "profile_path": "/pJNzqDetlA9yxsYLg8uzqlhk6t8.jpg",
      "cast_id": 18,
      "character": "Alan 'Al' Rockoff, Photographer",
      "credit_id": "52fe4260c3a36847f80197ed",
      "order": 3
    },
    {
      "adult": false,
      "gender": 2,
      "id": 11860,
      "known_for_department": "Acting",
      "name": "Athol Fugard",
      "original_name": "Athol Fugard",
      "popularity": 0.988,
      "profile_path": "/vr4iRP4Mvc8QWYUtceVKKEpebbB.jpg",
      "cast_id": 29,
      "character": "Dr. Sundesval",
      "credit_id": "57f586ce92514136010005f9",
      "order": 4
    },
    {
      "adult": false,
      "gender": 2,
      "id": 6104,
      "known_for_department": "Acting",
      "name": "Julian Sands",
      "original_name": "Julian Sands",
      "popularity": 13.133,
      "profile_path": "/8TYtEyKZle2B3cUYT7FBM9HJRtZ.jpg",
      "cast_id": 19,
      "character": "Jon Swain",
      "credit_id": "52fe4260c3a36847f80197f1",
      "order": 5
    },
    {
      "adult": false,
      "gender": 2,
      "id": 8978,
      "known_for_department": "Acting",
      "name": "Spalding Gray",
      "original_name": "Spalding Gray",
      "popularity": 2.677,
      "profile_path": "/qmEBNepXpBuDnW3gdkY2sHeoGkq.jpg",
      "cast_id": 21,
      "character": "United States consul",
      "credit_id": "52fe4260c3a36847f80197f9",
      "order": 6
    },
    {
      "adult": false,
      "gender": 2,
      "id": 104795,
      "known_for_department": "Acting",
      "name": "Bill Paterson",
      "original_name": "Bill Paterson",
      "popularity": 11.147,
      "profile_path": "/mk5vpYLmER7asqOhEwVKXD3P3YE.jpg",
      "cast_id": 27,
      "character": "Dr. MacEntire",
      "credit_id": "54a2b6cec3a3682f1e00eefa",
      "order": 7
    },
    {
      "adult": false,
      "gender": 2,
      "id": 121635,
      "known_for_department": "Acting",
      "name": "Graham Kennedy",
      "original_name": "Graham Kennedy",
      "popularity": 1.438,
      "profile_path": "/180xhHA37hjsgFSmLGSvaY15VpL.jpg",
      "cast_id": 30,
      "character": "Dougal",
      "credit_id": "57f586eb925141360d00061f",
      "order": 8
    },
    {
      "adult": false,
      "gender": 0,
      "id": 8980,
      "known_for_department": "Acting",
      "name": "Katherine Krapum Chey",
      "original_name": "Katherine Krapum Chey",
      "popularity": 0.648,
      "profile_path": null,
      "cast_id": 23,
      "character": "Ser Moeum: Dith Pran's wife",
      "credit_id": "52fe4260c3a36847f8019801",
      "order": 9
    },
    {
      "adult": false,
      "gender": 0,
      "id": 8981,
      "known_for_department": "Acting",
      "name": "Oliver Pierpaoli",
      "original_name": "Oliver Pierpaoli",
      "popularity": 0.6,
      "profile_path": null,
      "cast_id": 24,
      "character": "Titony: Dith Pran's son",
      "credit_id": "52fe4260c3a36847f8019805",
      "order": 10
    },
    {
      "adult": false,
      "gender": 0,
      "id": 8982,
      "known_for_department": "Acting",
      "name": "Edward Entero Chey",
      "original_name": "Edward Entero Chey",
      "popularity": 0.6,
      "profile_path": null,
      "cast_id": 25,
      "character": "Sarun, Sydney's Driver",
      "credit_id": "52fe4260c3a36847f8019809",
      "order": 11
    },
    {
      "adult": false,
      "gender": 0,
      "id": 1387285,
      "known_for_department": "Acting",
      "name": "Tom Bird",
      "original_name": "Tom Bird",
      "popularity": 0.6,
      "profile_path": null,
      "cast_id": 31,
      "character": "U.S. Military Advisor",
      "credit_id": "57f58700c3a36816040005d3",
      "order": 12
    },
    {
      "adult": false,
      "gender": 0,
      "id": 8983,
      "known_for_department": "Acting",
      "name": "Monirak Sisowath",
      "original_name": "Monirak Sisowath",
      "popularity": 0.6,
      "profile_path": null,
      "cast_id": 26,
      "character": "Phat: Khmer Rouge leader: 2nd village",
      "credit_id": "52fe4260c3a36847f801980d",
      "order": 13
    },
    {
      "adult": false,
      "gender": 0,
      "id": 1689818,
      "known_for_department": "Acting",
      "name": "Lambool Dtangpaibool",
      "original_name": "Lambool Dtangpaibool",
      "popularity": 0.6,
      "profile_path": null,
      "cast_id": 32,
      "character": "Phat's Son",
      "credit_id": "57f5871392514136160005e7",
      "order": 14
    },
    {
      "adult": false,
      "gender": 2,
      "id": 28029,
      "known_for_department": "Acting",
      "name": "Ira Wheeler",
      "original_name": "Ira Wheeler",
      "popularity": 0.786,
      "profile_path": null,
      "cast_id": 33,
      "character": "Ambassador Wade",
      "credit_id": "57f58720c3a3681616000647",
      "order": 15
    },
    {
      "adult": false,
      "gender": 2,
      "id": 29072,
      "known_for_department": "Acting",
      "name": "David Henry",
      "original_name": "David Henry",
      "popularity": 1.826,
      "profile_path": null,
      "cast_id": 34,
      "character": "France",
      "credit_id": "57f5872cc3a36816070005a8",
      "order": 16
    },
    {
      "adult": false,
      "gender": 2,
      "id": 8979,
      "known_for_department": "Acting",
      "name": "Patrick Malahide",
      "original_name": "Patrick Malahide",
      "popularity": 5.97,
      "profile_path": "/ae0AJ8FbJireYPQyglIxNucjqIy.jpg",
      "cast_id": 22,
      "character": "Morgan",
      "credit_id": "52fe4260c3a36847f80197fd",
      "order": 17
    },
    {
      "adult": false,
      "gender": 1,
      "id": 13476,
      "known_for_department": "Acting",
      "name": "Nell Campbell",
      "original_name": "Nell Campbell",
      "popularity": 3.68,
      "profile_path": "/kddpXP7nwgMAImJVyPWTFpCHdZ4.jpg",
      "cast_id": 36,
      "character": "Beth",
      "credit_id": "57f5874ac3a3681616000655",
      "order": 18
    },
    {
      "adult": false,
      "gender": 0,
      "id": 1689819,
      "known_for_department": "Acting",
      "name": "Joan Harris",
      "original_name": "Joan Harris",
      "popularity": 0.6,
      "profile_path": null,
      "cast_id": 37,
      "character": "TV Interviewer",
      "credit_id": "57f5876592514136090006a6",
      "order": 19
    },
    {
      "adult": false,
      "gender": 1,
      "id": 11903,
      "known_for_department": "Acting",
      "name": "Joanna Merlin",
      "original_name": "Joanna Merlin",
      "popularity": 1.566,
      "profile_path": "/6XmZtra49URbifNxnXo2NJsahRv.jpg",
      "cast_id": 38,
      "character": "Schanberg's Sister",
      "credit_id": "57f587769251413601000631",
      "order": 20
    },
    {
      "adult": false,
      "gender": 0,
      "id": 153414,
      "known_for_department": "Acting",
      "name": "Jay Barney",
      "original_name": "Jay Barney",
      "popularity": 0.6,
      "profile_path": null,
      "cast_id": 39,
      "character": "Schanberg's  Father",
      "credit_id": "57f587859251413601000637",
      "order": 21
    },
    {
      "adult": false,
      "gender": 2,
      "id": 1564787,
      "known_for_department": "Acting",
      "name": "Mark Long",
      "original_name": "Mark Long",
      "popularity": 0.62,
      "profile_path": "/nibF6htEOL8XkGdlC3qJ9rRg375.jpg",
      "cast_id": 47,
      "character": "Noaks",
      "credit_id": "5a5bb72e0e0a265767023ff3",
      "order": 22
    },
    {
      "adult": false,
      "gender": 0,
      "id": 52213,
      "known_for_department": "Acting",
      "name": "Sayo Inaba",
      "original_name": "Sayo Inaba",
      "popularity": 1.075,
      "profile_path": null,
      "cast_id": 41,
      "character": "Mrs. Noaks",
      "credit_id": "57f5879d92514136050006a9",
      "order": 23
    },
    {
      "adult": false,
      "gender": 0,
      "id": 1689820,
      "known_for_department": "Acting",
      "name": "Mow Leng",
      "original_name": "Mow Leng",
      "popularity": 0.6,
      "profile_path": null,
      "cast_id": 42,
      "character": "Sirik Matak",
      "credit_id": "57f587abc3a368160c0005b2",
      "order": 24
    },
    {
      "adult": false,
      "gender": 0,
      "id": 1689821,
      "known_for_department": "Acting",
      "name": "Chinsaure Sa",
      "original_name": "Chinsaure Sa",
      "popularity": 0.6,
      "profile_path": null,
      "cast_id": 43,
      "character": "Arresting Officer",
      "credit_id": "57f587b9c3a368162500065c",
      "order": 25
    },
    {
      "adult": false,
      "gender": 0,
      "id": 1689822,
      "known_for_department": "Acting",
      "name": "Hout Ming Tran",
      "original_name": "Hout Ming Tran",
      "popularity": 0.6,
      "profile_path": null,
      "cast_id": 44,
      "character": "K.R. Cadre - First Village",
      "credit_id": "57f587c8c3a368161600069a",
      "order": 26
    },
    {
      "adult": false,
      "gender": 0,
      "id": 1689823,
      "known_for_department": "Acting",
      "name": "Thach Suon",
      "original_name": "Thach Suon",
      "popularity": 0.6,
      "profile_path": null,
      "cast_id": 45,
      "character": "Sahn",
      "credit_id": "57f587d092514136130006b5",
      "order": 27
    },
    {
      "adult": false,
      "gender": 0,
      "id": 1689824,
      "known_for_department": "Acting",
      "name": "Neevy Pal",
      "original_name": "Neevy Pal",
      "popularity": 0.996,
      "profile_path": null,
      "cast_id": 46,
      "character": "Rosa",
      "credit_id": "57f587ddc3a3681610000614",
      "order": 28
    }
  ],
  "crew": [
    {
      "adult": false,
      "gender": 2,
      "id": 8374,
      "known_for_department": "Production",
      "name": "Iain Smith",
      "original_name": "Iain Smith",
      "popularity": 0.62,
      "profile_path": null,
      "credit_id": "551720a59251416f120014a8",
      "department": "Production",
      "job": "Associate Producer"
    },
    {
      "adult": false,
      "gender": 1,
      "id": 1046,
      "known_for_department": "Production",
      "name": "Juliet Taylor",
      "original_name": "Juliet Taylor",
      "popularity": 0.736,
      "profile_path": "/yZpHkHDJ38MC9ochQcitEA52oFB.jpg",
      "credit_id": "52fe4260c3a36847f80197c9",
      "department": "Production",
      "job": "Casting"
    },
    {
      "adult": false,
      "gender": 1,
      "id": 1302,
      "known_for_department": "Production",
      "name": "Susie Figgis",
      "original_name": "Susie Figgis",
      "popularity": 1.925,
      "profile_path": "/yW6eiXF0CEXCHpqxqvEUZmq2mUq.jpg",
      "credit_id": "52fe4260c3a36847f80197bd",
      "department": "Production",
      "job": "Casting"
    },
    {
      "adult": false,
      "gender": 1,
      "id": 3806,
      "known_for_department": "Production",
      "name": "Marion Dougherty",
      "original_name": "Marion Dougherty",
      "popularity": 1.4,
      "profile_path": null,
      "credit_id": "52fe4260c3a36847f80197b7",
      "department": "Production",
      "job": "Casting"
    },
    {
      "adult": false,
      "gender": 2,
      "id": 5022,
      "known_for_department": "Art",
      "name": "Roy Walker",
      "original_name": "Roy Walker",
      "popularity": 0.745,
      "profile_path": null,
      "credit_id": "52fe4260c3a36847f80197cf",
      "department": "Art",
      "job": "Production Design"
    },
    {
      "adult": false,
      "gender": 2,
      "id": 8936,
      "known_for_department": "Art",
      "name": "Roger Murray-Leach",
      "original_name": "Roger Murray-Leach",
      "popularity": 0.6,
      "profile_path": null,
      "credit_id": "52fe4260c3a36847f80197d5",
      "department": "Art",
      "job": "Art Direction"
    },
    {
      "adult": false,
      "gender": 2,
      "id": 8965,
      "known_for_department": "Directing",
      "name": "Roland Joffé",
      "original_name": "Roland Joffé",
      "popularity": 4.057,
      "profile_path": "/y67IZdDavgg2PS4OoW44APZJGql.jpg",
      "credit_id": "52fe4260c3a36847f801978d",
      "department": "Directing",
      "job": "Director"
    },
    {
      "adult": false,
      "gender": 2,
      "id": 8966,
      "known_for_department": "Acting",
      "name": "Bruce Robinson",
      "original_name": "Bruce Robinson",
      "popularity": 1.347,
      "profile_path": "/6Q4dOB1dAElsZMZc9NYtbKwvvpB.jpg",
      "credit_id": "52fe4260c3a36847f8019793",
      "department": "Writing",
      "job": "Screenplay"
    },
    {
      "adult": false,
      "gender": 2,
      "id": 8967,
      "known_for_department": "Production",
      "name": "David Puttnam",
      "original_name": "David Puttnam",
      "popularity": 0.618,
      "profile_path": null,
      "credit_id": "52fe4260c3a36847f8019799",
      "department": "Production",
      "job": "Producer"
    },
    {
      "adult": false,
      "gender": 2,
      "id": 8968,
      "known_for_department": "Sound",
      "name": "Mike Oldfield",
      "original_name": "Mike Oldfield",
      "popularity": 1.01,
      "profile_path": "/zXG5jeZDEIW6o1cInUiLqklHlUX.jpg",
      "credit_id": "52fe4260c3a36847f80197a5",
      "department": "Sound",
      "job": "Original Music Composer"
    },
    {
      "adult": false,
      "gender": 2,
      "id": 8969,
      "known_for_department": "Camera",
      "name": "Chris Menges",
      "original_name": "Chris Menges",
      "popularity": 3.427,
      "profile_path": "/nmjNp6Sx1G9NCjn2jaLhScjyiUX.jpg",
      "credit_id": "52fe4260c3a36847f80197ab",
      "department": "Camera",
      "job": "Director of Photography"
    },
    {
      "adult": false,
      "gender": 2,
      "id": 8970,
      "known_for_department": "Editing",
      "name": "Jim Clark",
      "original_name": "Jim Clark",
      "popularity": 0.786,
      "profile_path": "/sQ6hauV0xjvIOwMebG2tM9DJ6RF.jpg",
      "credit_id": "52fe4260c3a36847f80197b1",
      "department": "Editing",
      "job": "Editor"
    },
    {
      "adult": false,
      "gender": 1,
      "id": 8971,
      "known_for_department": "Production",
      "name": "Pat Golden",
      "original_name": "Pat Golden",
      "popularity": 0.6,
      "profile_path": "/83ZwBFc01QO4Y5qMnT6B6NPmg9C.jpg",
      "credit_id": "52fe4260c3a36847f80197c3",
      "department": "Production",
      "job": "Casting"
    },
    {
      "adult": false,
      "gender": 2,
      "id": 8973,
      "known_for_department": "Art",
      "name": "Steve Spence",
      "original_name": "Steve Spence",
      "popularity": 1.38,
      "profile_path": null,
      "credit_id": "52fe4260c3a36847f80197db",
      "department": "Art",
      "job": "Art Direction"
    },
    {
      "adult": false,
      "gender": 0,
      "id": 8974,
      "known_for_department": "Costume & Make-Up",
      "name": "Judy Moorcroft",
      "original_name": "Judy Moorcroft",
      "popularity": 0.828,
      "profile_path": null,
      "credit_id": "52fe4260c3a36847f80197e1",
      "department": "Costume & Make-Up",
      "job": "Costume Design"
    },
    {
      "adult": false,
      "gender": 2,
      "id": 40796,
      "known_for_department": "Camera",
      "name": "David Appleby",
      "original_name": "David Appleby",
      "popularity": 1.228,
      "profile_path": "/b8zskcykOOugn31axyHn5qB8hdn.jpg",
      "credit_id": "5c28b9580e0a26793036e2e0",
      "department": "Camera",
      "job": "Still Photographer"
    },
    {
      "adult": false,
      "gender": 0,
      "id": 2191776,
      "known_for_department": "Sound",
      "name": "Judy Freeman",
      "original_name": "Judy Freeman",
      "popularity": 0.6,
      "profile_path": null,
      "credit_id": "5c2628b6c3a3687300c2ee99",
      "department": "Crew",
      "job": "Video Assist Operator"
    }
  ]
};
